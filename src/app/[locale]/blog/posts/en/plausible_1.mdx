---
title: "Installing Plausible"
publishedAt: "2024-11-20"
summary: "Case Study: Installing Plausible on my server"
image: "/images/blog/privacy-focused-web-analytics.png"
tag: ["Tutorial", "FOSS", "Analytics"]
---
<div style={{ display: 'flex', paddingLeft: '10px' }}>
    <img alt="Static Badge" src='https://img.shields.io/badge/DIFFICULTY-Intermediate-yellow?style=flat-square&logoSize=auto&labelColor=black'/>
    <a href="https://github.com/plausible/community-edition/"><img alt="Static Badge" src="https://img.shields.io/badge/Source_Code-black?style=flat-square&logo=github&logoSize=auto&labelColor=black"/></a>
</div>

While setting up my VPS for this portfolio, I decided to create tutorials for each technology I install. If it can help someone, why not!

## What is Plausible?
Plausible Analytics is an open-source, lightweight, privacy-focused web analytics tool, offering an alternative to Google Analytics.

The **community edition** is free, making Plausible a must-have for self-hosting.

## Key Features

- **Clean Interface**: Provides essential metrics on a single page without complex menus.
- **Privacy Respect**: Collects no personal data or IP addresses, compliant with GDPR, CCPA, and PECR regulations.
- **Lightweight Script**: Improves page load times with a minimalist script.
- **Automated Reports**: Sends weekly or monthly reports via email or Slack.
- **Conversion Tracking**: Allows setting custom events and tracking important goals.

## Technologies Used

- **Backend**: Developed with Elixir and the Phoenix framework.
- **Database**: Uses PostgreSQL for general data and ClickHouse for statistics.
- **Frontend**: Interactive interface built with React and styled with TailwindCSS.

## Installation

Let's move on to the installation.

Start by cloning the repo:
```sh
git clone -b v2.1.4 --single-branch https://github.com/plausible/community-edition plausible-ce
```
Next, I create a .env file with a base URL and a token generated by openssl. I add the **HTTP_PORT** environment variable because I use a Reverse Proxy.

```sh
touch .env
echo "BASE_URL=https://plausible.qcoudeyr.com" >> .env
echo "SECRET_KEY_BASE=$(openssl rand -base64 48)" >> .env
echo "HTTP_PORT=8000" >> .env
```
Once that's done, I just need to update my reverse proxy to handle the new local address **http://localhost:8000**

Finally, a small command to run Plausible locally.

```sh
# To be executed in the cloned folder. e.g : /home/example/plausible-ce/
docker compose up -d
```
And that's it, the installation part is done. Really easy, isn't it?!
P.S: I just struggled for 2 hours thinking that the Caddy configuration wasn't allowing websockets (wss://) but it was just during the git clone that one of the files got corrupted... Yay...

## Now, the configuration...

The configuration allows setting up the various sites you want to monitor and generating the scripts based on the technology used by the site.

Let's start by logging into the site after configuring it in the following places:

* Update the **DNS RECORD** at your registrar if you use a domain name.
* Update the configuration of your Reverse Proxy software (For me, Caddy)

Now, on the site, I create my user.

<div style={{
  justifyContent: 'space-between',
  gap: '1rem',
  margin: '2rem 0'
}}>
<img src="/images/blog/plausible1.png"    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}/>
</div>

Set up the site's URL and time zone.

<div style={{
  justifyContent: 'space-between',
  gap: '1rem',
  margin: '2rem 0'
}}>
<img src="/images/blog/plausible2.png"    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}/>
</div>

The site asks us to set up the script based on what statistics we want.
(Personally, I didn't put anything because the default script is enough for me)

<div style={{
  justifyContent: 'space-between',
  gap: '1rem',
  margin: '2rem 0'
}}>
  <img src="/images/blog/plausible3.png"
    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}/>
</div>

To install the script in my Next.js configuration, I had to search the internet to find [an npm package](https://github.com/4lejandrito/next-plausible) to install that automatically manages the script.

I followed the instructions and placed the following code in the corresponding files:

<div style={{
  justifyContent: 'space-between',
  gap: '1rem',
  margin: '2rem 0'
}}>
  <img
    src="/images/blog/plausible_nextjs.png"
    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}
    alt="Plausible Next.js"
  />
[Adding in my next.conf.js]
  <img
    src="/images/blog/plausible_pagetsx.png"
    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}
    alt="Plausible Pages TSX"
  />
[Adding in my page.tsx]
  <img
    src="/images/blog/plausible_caddy.png"
    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}
    alt="Plausible Caddy"
  />
[Config reverse-proxy for Caddy](https://plausible.io/docs/proxy/guides/caddy)
</div>

And after restarting the concerned services, the statistics are accessible!

<div style={{
  justifyContent: 'space-between',
  gap: '1rem',
  margin: '2rem 0'
}}>
  <img src="/images/blog/plausible_overview_rs.png"
    style={{
      maxWidth: '100%',
      height: 'auto',
      flex: '1'
    }}/>
</div>

## Some comments

Well, a little tutorial on installing Plausible.
It's not my first installation but it was my first configuration using Next.js and Caddy.
I struggled a lot since there aren't many resources and without many logs, you have to manage with the means at hand (dev console in the browser, docker logs, github issues, forum, etc...)

Otherwise, I will give feedback in some time once I have finished building and configuring this site, and when I start publishing on **dev.to**.

Thanks for reading!

## Resources

* [Plausible](https://plausible.io/)
* [Plausible CE](https://github.com/plausible/analytics)
* [Nextjs-plausible](https://github.com/4lejandrito/next-plausible)
* [Plausible with Caddy as Proxy](https://plausible.io/docs/proxy/guides/caddy)
* [Caddy](https://caddyserver.com/)
* [Next.js](https://nextjs.org/)

